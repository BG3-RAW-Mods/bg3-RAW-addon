// AI_ONLY:ApplyStatus(AI_HELPER_BUFF,100,-1)
new entry "Shout_Wildshape_Panther"
type "SpellData"
using "Shout_Wildshape_Panther"
data "SpellProperties" "IF(ClassLevelEqual('Druid',2)):ApplyStatus(WILDSHAPE_PANTHER_PLAYER,100,-1);IF(ClassLevelEqual('Druid',3)):ApplyStatus(WILDSHAPE_PANTHER_PLAYER_2,100,-1);IF(ClassLevelHigherOrEqualThan(4,'Druid')):ApplyStatus(WILDSHAPE_PANTHER_PLAYER_3,100,-1)"
data "Description" "b9797ae6-2e02-430b-9a66-9d66cab97f29;1"
data "ExtraDescription" "3a82397f-cdd9-4078-bd1c-6caf5518b8bf;1"
data "ExtraDescriptionParams" "RegainHitPoints(13)"

new entry "WILDSHAPE_PANTHER_PLAYER"
type "StatusData"
using "WILDSHAPE_PANTHER_PLAYER"
data "Boosts" "ProficiencyBonus(Skill,Perception);ProficiencyBonus(Skill,Stealth); VoicebarkBlock();BlockSpellCast();UnlockSpell(Shout_WildShape_Dismiss);IF(HasPassive('WildShape_Combat',context.Source)):UnlockSpell(Shout_WildShape_Combat_Heal,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf)"
data "Passives" "WildShapeSpeed50;Darkvision30;KeenSmell;FelineFall"
data "TemplateID" "84f1b165-b68e-4294-b41c-eb600b042c03"

new entry "WILDSHAPE_PANTHER_PLAYER_2"
type "StatusData"
using "WILDSHAPE_PANTHER_PLAYER"
data "TemplateID" "b293e6c4-6fd1-4444-8c41-d1f602102919"

new entry "WILDSHAPE_PANTHER_PLAYER_3"
type "StatusData"
using "WILDSHAPE_PANTHER_PLAYER"
data "TemplateID" "0970e9b8-de93-4965-8506-e7610fadb268"

new entry "Wildshape_Panther_1"
type "Character"
using "Panther"
data "Vitality" "13"

new entry "Wildshape_Panther_2"
type "Character"
using "Wildshape_Panther_1"
data "Vitality" "18"

new entry "Wildshape_Panther_3"
type "Character"
using "Wildshape_Panther_1"
data "Vitality" "24"

new entry "Target_Bite_Panther"
type "SpellData"
using "Target_Bite_Panther"
data "SpellSuccess" "IF(not HasPassive('PrimalStrike',context.Source)):DealDamage(max(1,1d6+UnarmedMeleeAbilityModifier),Piercing);IF(HasPassive('PrimalStrike',context.Source)):DealDamage(max(1,1d6+UnarmedMeleeAbilityModifier),Piercing,Magical)"
data "TooltipDamageList" "DealDamage(1d6+UnarmedMeleeAbilityModifier,Piercing)"

new entry "Projectile_Pounce_Panther_Summon"
type "SpellData"
using "Projectile_Pounce_Panther_Summon"
data "SpellRoll" "Attack(AttackType.MeleeUnarmedAttack)"
data "SpellSuccess" "IF(not HasPassive('PrimalStrike',context.Source)):DealDamage(max(1,1d4+UnarmedMeleeAbilityModifier),Piercing);IF(HasPassive('PrimalStrike',context.Source)):DealDamage(max(1,1d4+UnarmedMeleeAbilityModifier),Piercing,Magical);ApplyStatus(WILDSHAPE_PANTHER_BOUNCE,100,0)"
data "Description" "a5c16db7-6e7f-4718-a2ee-3a6d8c5c6323;1"
data "TooltipDamageList" "DealDamage(1d4+UnarmedMeleeAbilityModifier,Piercing);"
data "TooltipStatusApply" "ApplyStatus(PRONE,100,1)"

new entry "Target_Bite_Panther_BonusAction"
type "SpellData"
using "Target_Bite_Panther"
data "UseCosts" "BonusActionPoint:1"
data "SpellFlags" "IsAttack;IsMelee;IsHarmful;Temporary"
data "TargetConditions" "HasStatus('PRONE')"

new entry "WILDSHAPE_PANTHER_BOUNCE"
type "StatusData"
data "StatusType" "BOOST"
data "OnApplyRoll" "not SavingThrow(Ability.Strength, WildShapeSaveDC(13))"
data "OnApplySuccess" "ApplyStatus(PRONE,100,1);ApplyStatus(SELF,WILDSHAPE_PANTHER_BONUS_BITE,100,1)"
data "StatusPropertyFlags" "DisableOverhead;DisablePortraitIndicator;DisableCombatlog"

new entry "WILDSHAPE_PANTHER_BONUS_BITE"
type "StatusData"
data "StatusType" "BOOST"
data "Boosts" "UnlockSpell(Target_Bite_Panther_BonusAction)"
data "StatusPropertyFlags" "DisableOverhead;DisablePortraitIndicator;DisableCombatlog"
data "RemoveEvents" "OnMove"