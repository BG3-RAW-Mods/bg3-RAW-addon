new entry "Shout_WildShape_GiantWolfSpider"
type "SpellData"
using "Shout_WildShape_Spider"
data "SpellProperties" "IF(ClassLevelEqual('Druid',2)):ApplyStatus(WILDSHAPE_GIANT_WOLFSPIDER_PLAYER,100,-1);IF(ClassLevelEqual('Druid',3)):ApplyStatus(WILDSHAPE_GIANT_WOLFSPIDER_PLAYER_2,100,-1);IF(ClassLevelHigherOrEqualThan(4,'Druid')):ApplyStatus(WILDSHAPE_GIANT_WOLFSPIDER_PLAYER_3,100,-1)"
data "DisplayName" "a0f4b0e7-2477-4781-b9c2-15a9f150c4f5;1"
data "Description" "1ff13628-ec31-4a0b-95f5-9634af6ee857;1"
data "ExtraDescription" "3a82397f-cdd9-4078-bd1c-6caf5518b8bf;1"
data "ExtraDescriptionParams" "RegainHitPoints(11)"

new entry "Giant_WolfSpider_Wildshape_1"
type "Character"
using "_Beast"
data "Strength" "12"
data "Dexterity" "16"
data "Constitution" "13"
data "Intelligence" "3"
data "Wisdom" "12"
data "Charisma" "4"
data "Armor" "13"
data "Vitality" "11"
data "Weight" "120"
data "StepsType" "Spider"
data "SpellCastingAbility" "Dexterity"
data "UnarmedAttackAbility" "Dexterity"
data "ArmorType" "None"

new entry "Giant_WolfSpider_Wildshape_2"
type "Character"
using "Giant_WolfSpider_Wildshape_1"
data "Vitality" "14"

new entry "Giant_WolfSpider_Wildshape_3"
type "Character"
using "Giant_WolfSpider_Wildshape_1"
data "Vitality" "18"

new entry "WILDSHAPE_GIANT_WOLFSPIDER_PLAYER"
type "StatusData"
using "WILDSHAPE_SPIDER_GIANT_PLAYER"
data "DisplayName" "a0f4b0e7-2477-4781-b9c2-15a9f150c4f5;1"
data "Boosts" "ProficiencyBonus(Skill,Perception);ProficiencyBonus(Skill,Stealth);ExpertiseBonus(Stealth); VoicebarkBlock();BlockSpellCast();UnlockSpell(Shout_WildShape_Dismiss);IF(HasPassive('WildShape_Combat',context.Source)):UnlockSpell(Shout_WildShape_Combat_Heal,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf)"
data "Passives" "WildShapeSpeed40;Darkvision60;SpiderWalk;SpiderFallResistance;Blindsight"
data "TemplateID" "6ee2d8bf-d43b-41e0-8bdb-eade1381f711"

new entry "WILDSHAPE_GIANT_WOLFSPIDER_PLAYER_2"
type "StatusData"
using "WILDSHAPE_GIANT_WOLFSPIDER_PLAYER"
data "TemplateID" "95e12262-769d-4264-8a3f-ff7f347f53ce"

new entry "WILDSHAPE_GIANT_WOLFSPIDER_PLAYER_3"
type "StatusData"
using "WILDSHAPE_GIANT_WOLFSPIDER_PLAYER"
data "TemplateID" "3fb28e5d-5c2e-4cb0-8756-f5af996863b0"

new entry "Target_Bite_GiantWolfSpider_Wildshape"
type "SpellData"
using "Target_Bite_GiantSpider"
data "Description" "45821c16-b5f3-4d08-9da4-7d2fc1f4d42b;1"
data "SpellSuccess" "IF(not HasPassive('PrimalStrike',context.Source)):DealDamage(max(1,1d6+UnarmedMeleeAbilityModifier),Piercing);IF(HasPassive('PrimalStrike',context.Source)):DealDamage(max(1,1d6+UnarmedMeleeAbilityModifier),Piercing,Magical);ApplyStatus(GIANT_WOLFSPIDER_POISON,100,1)"
data "TooltipDamageList" "DealDamage(1d6+UnarmedMeleeAbilityModifier,Piercing)"
data "TooltipStatusApply" "ApplyStatus(GIANT_WOLFSPIDER_POISON,100,1)"

// TODO: If the poison damage reduces the target to 0 hit points, the target is stable but poisoned for 1 hour, 
// even after regaining hit points, and is paralyzed while poisoned in this way.
new entry "GIANT_WOLFSPIDER_POISON"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "ba6fb6d5-b99f-46c0-b3c9-e5441983a96a;1"
data "Description" "b1c27a4d-1e6d-4a0f-932f-a2ebe683448f;1"
data "DescriptionParams" "DealDamage(2d6,Poison)"
data "TickType" "EndTurn"
data "TooltipSave" "Constitution"
data "TooltipDamage" "DealDamage(2d6,Poison)"
data "OnApplyRoll" "not SavingThrow(Ability.Constitution,WildShapeSaveDC())"
data "OnApplySuccess" "DealDamage(2d6,Poison)"
data "OnApplyFail" "DealDamage((2d6)/2,Poison)"
