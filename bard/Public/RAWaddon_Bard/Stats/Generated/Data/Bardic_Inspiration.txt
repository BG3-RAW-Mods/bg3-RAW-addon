new entry "BardicInspirationScaling"
type "PassiveData"
data "Boosts" "IF(CharismaModifier(1)):ActionResource(BardicInspiration,1,0);IF(CharismaModifier(2)):ActionResource(BardicInspiration,2,0);IF(CharismaModifier(3)):ActionResource(BardicInspiration,3,0);IF(CharismaModifier(4)):ActionResource(BardicInspiration,4,0);IF(CharismaModifier(5)):ActionResource(BardicInspiration,5,0);IF(CharismaModifier(6)):ActionResource(BardicInspiration,6,0);IF(CharismaModifier(7)):ActionResource(BardicInspiration,7,0);IF(CharismaModifier(8)):ActionResource(BardicInspiration,8,0);IF(CharismaModifier(9)):ActionResource(BardicInspiration,9,0);IF(CharismaModifier(10)):ActionResource(BardicInspiration,10,0)"
data "BoostContext" "OnStatusApply;OnStatusRemove;OnEquip;OnShortRest;OnCreate;OnLongRest;OnInventoryChanged"
data "Properties" "IsHidden"

new entry "Target_BardicInspiration"
type "SpellData"
using "Target_BardicInspiration"
data "SpellProperties" "IF(RawClassLevelLessThan('Bard',5)):ApplyStatus(BARDIC_INSPIRATION,100,100);IF(RawClassLevelBetween('Bard',5,9)):ApplyStatus(BARDIC_INSPIRATION_D8,100,100);IF(RawClassLevelHigherThan('Bard',9)):ApplyStatus(BARDIC_INSPIRATION_D10,100,100);AI_ONLY:ApplyStatus(AI_HELPER_BARDIC_INSPIRATION,100,3)"
data "TargetConditions" "Character() and not Enemy() and not Self() and not (HasStatus('BARDIC_INSPIRATION') or HasStatus('BARDIC_INSPIRATION_D8') or HasStatus('BARDIC_INSPIRATION_D10') or HasStatus('BARDIC_INSPIRATION_COMBAT') or HasStatus('BARDIC_INSPIRATION_COMBAT_D8') or HasStatus('BARDIC_INSPIRATION_COMBAT_D10'))"
data "TooltipStatusApply" "ApplyStatus(BARDIC_INSPIRATION,100,100)"

new entry "Target_BardicInspiration_Combat"
type "SpellData"
using "Target_BardicInspiration_Combat"
data "SpellProperties" "IF(RawClassLevelLessThan('Bard',5)):ApplyStatus(BARDIC_INSPIRATION_COMBAT,100,100);IF(RawClassLevelBetween('Bard',5,9)):ApplyStatus(BARDIC_INSPIRATION_COMBAT_D8,100,100);IF(RawClassLevelHigherThan('Bard',9)):ApplyStatus(BARDIC_INSPIRATION_COMBAT_D10,100,100);AI_ONLY:ApplyStatus(AI_HELPER_BARDIC_INSPIRATION,100,3)"
data "TooltipStatusApply" "ApplyStatus(BARDIC_INSPIRATION_COMBAT,100,100)"

// data "Boosts" "ActionResource(BardicInspiration,1,0,d6);UnlockInterrupt(Interrupt_CombatInspiration_Attack);UnlockInterrupt(Interrupt_CombatInspiration_SavingThrow_ArmorClass);UnlockInterrupt(Interrupt_CombatInspiration_Damage)"
// data "Boosts" "ActionResource(BardicInspiration,1,0,d8);UnlockInterrupt(Interrupt_CombatInspiration_Attack_d8);UnlockInterrupt(Interrupt_CombatInspiration_SavingThrow_ArmorClass_d8);UnlockInterrupt(Interrupt_CombatInspiration_Damage_d8)"
// data "Boosts" "ActionResource(BardicInspiration,1,0,d10);UnlockInterrupt(Interrupt_CombatInspiration_Attack_d10);UnlockInterrupt(Interrupt_CombatInspiration_SavingThrow_ArmorClass_d10);UnlockInterrupt(Interrupt_CombatInspiration_Damage_d10)"

new entry "Interrupt_BardicInspiration_Attack"
type "InterruptData"
using "Interrupt_BardicInspiration_Attack"
data "InterruptDefaultValue" "Enabled;Ask"
data "Conditions" "not Dead(context.Observer) and HasInterruptedAttack() and Self(context.Observer,context.Source) and not AnyEntityIsItem()"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,ResourceRoll(BardicInspiration,1));RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_ATTACK,100,0)"

new entry "Interrupt_BardicInspiration_Attack_d8"
type "InterruptData"
using "Interrupt_BardicInspiration_Attack"
data "DescriptionParams" "1d8"
data "Conditions" "not Dead(context.Observer) and HasInterruptedAttack() and Self(context.Observer,context.Source) and not AnyEntityIsItem()"

new entry "Interrupt_BardicInspiration_Attack_d10"
type "InterruptData"
using "Interrupt_BardicInspiration_Attack"
data "DescriptionParams" "1d10"
data "Conditions" "not Dead(context.Observer) and HasInterruptedAttack() and Self(context.Observer,context.Source) and not AnyEntityIsItem()"

new entry "Interrupt_BardicInspiration_SavingThrow"
type "InterruptData"
using "Interrupt_BardicInspiration_SavingThrow"
data "Conditions" "not Dead(context.Observer) and HasInterruptedSavingThrow() and Self(context.Observer,context.Target) and not AnyEntityIsItem()"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,ResourceRoll(BardicInspiration,1));RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D8);RemoveStatus(OBSERVER_OBSERVER,BARDIC_INSPIRATION_D10);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_BARDIC_INSPIRATION_SAVINGTHROW,100,0)"

new entry "Interrupt_BardicInspiration_SavingThrow_d8"
type "InterruptData"
using "Interrupt_BardicInspiration_SavingThrow"
data "DescriptionParams" "1d8"
data "Conditions" "not Dead(context.Observer) and HasInterruptedSavingThrow() and Self(context.Observer,context.Target) and not AnyEntityIsItem()"

new entry "Interrupt_BardicInspiration_SavingThrow_d10"
type "InterruptData"
using "Interrupt_BardicInspiration_SavingThrow"
data "DescriptionParams" "1d10"
data "Conditions" "not Dead(context.Observer) and HasInterruptedSavingThrow() and Self(context.Observer,context.Target) and not AnyEntityIsItem()"

new entry "Interrupt_CombatInspiration_SavingThrow_ArmorClass"
type "InterruptData"
using "Interrupt_CombatInspiration_SavingThrow_ArmorClass"
data "Conditions" "not Dead(context.Observer) and (HasInterruptedAttack() or HasInterruptedSavingThrow()) and Self(context.Observer,context.Target) and not AnyEntityIsItem()"

new entry "Interrupt_CombatInspiration_SavingThrow_ArmorClass_d8"
type "InterruptData"
using "Interrupt_CombatInspiration_SavingThrow_ArmorClass"
data "DescriptionParams" "1d8"
data "Conditions" "not Dead(context.Observer) and (HasInterruptedAttack() or HasInterruptedSavingThrow()) and Self(context.Observer,context.Target) and not AnyEntityIsItem()"

new entry "Interrupt_CombatInspiration_SavingThrow_ArmorClass_d10"
type "InterruptData"
using "Interrupt_CombatInspiration_SavingThrow_ArmorClass"
data "DescriptionParams" "1d10"
data "Conditions" "not Dead(context.Observer) and (HasInterruptedAttack() or HasInterruptedSavingThrow()) and Self(context.Observer,context.Target) and not AnyEntityIsItem()"

new entry "Target_Countercharm"
type "SpellData"
using "Target_Countercharm"
data "SpellProperties" "GROUND:IF(HasInstrumentTypeEquipped(InstrumentType.Lute, context.Source)):Summon(b8349b08-f161-46c3-bde3-a62db026a4b6,2,,,CounterCharmStack,COUNTERCHARM_AURA);GROUND:IF(HasInstrumentTypeEquipped(InstrumentType.Drum, context.Source)):Summon(4feb37e1-75c5-4025-8587-f9c4390f12e3,2,,,CounterCharmStack,COUNTERCHARM_AURA);GROUND:IF(HasInstrumentTypeEquipped(InstrumentType.Violin, context.Source)):Summon(97ac5be0-4f4c-4411-92fb-9c5e63c565db,2,,,CounterCharmStack,COUNTERCHARM_AURA);GROUND:IF(HasInstrumentTypeEquipped(InstrumentType.Lyre, context.Source)):Summon(4f097abb-32ee-4e9e-9217-a6c19a0ebfde,2,,,CounterCharmStack,COUNTERCHARM_AURA);GROUND:IF(HasInstrumentTypeEquipped(InstrumentType.Flute, context.Source)):Summon(51d358dc-3f03-4527-8881-20bde920f650,2,,,CounterCharmStack,COUNTERCHARM_AURA);GROUND:IF(NoInstrumentEquipped()):Summon(19d4154e-fda0-4a7e-bcea-677989c8104c,2,,,CounterCharmStack,COUNTERCHARM_AURA)"
