new entry "MagicAwarenessScaling"
type "PassiveData"
data "Boosts" "IF(ProficiencyBonusEqual(2)):ActionResource(MagicAwareness,2,0);IF(ProficiencyBonusEqual(3)):ActionResource(MagicAwareness,3,0);IF(ProficiencyBonusEqual(4)):ActionResource(MagicAwareness,4,0);IF(ProficiencyBonusEqual(5)):ActionResource(MagicAwareness,5,0);IF(ProficiencyBonusEqual(6)):ActionResource(MagicAwareness,6,0)"
data "BoostContext" "OnCreate;OnShortRest;OnLongRest;OnStatusApply;OnStatusRemove;OnInventoryChanged;OnEquip"
data "Properties" "IsHidden"

new entry "Shout_MagicAwareness"
type "SpellData"
using "Shout_MagicAwareness"
data "Cooldown" ""
data "DescriptionParams" "Distance(18)"
data "SpellProperties" "ApplyStatus(MAGIC_AWARENESS,100,2)"
data "AreaRadius" "18"
data "TooltipStatusApply" "ApplyStatus(MAGIC_AWARENESS,100,2)"
data "UseCosts" "ActionPoint:1;MagicAwareness:1"

new entry "MAGIC_AWARENESS"
type "StatusData"
using "MAGIC_AWARENESS"
data "DescriptionParams" "Distance(18)"
data "AuraRadius" "18"
data "AuraStatuses" "TARGET:IF(Character() and not SummonOwner() and Ally()):ApplyStatus(MAGIC_AWARENESS_AURA)"
data "Boosts" "IF(ProficiencyBonusEqual(2)):RollBonus(SavingThrow,2);IF(ProficiencyBonusEqual(3)):RollBonus(SavingThrow,3);IF(ProficiencyBonusEqual(4)):RollBonus(SavingThrow,4)"

new entry "MAGIC_AWARENESS_AURA"
type "StatusData"
using "MAGIC_AWARENESS_AURA"
data "DescriptionParams" "Distance(18)"
data "Boosts" "IF(ProficiencyBonusEqual(2)):RollBonus(SavingThrow,2);IF(ProficiencyBonusEqual(3)):RollBonus(SavingThrow,3);IF(ProficiencyBonusEqual(4)):RollBonus(SavingThrow,4)"

new entry "Shout_Rage_WildMagic"
type "SpellData"
using "Shout_Rage_WildMagic"
data "Description" "a36668d0-01ee-4d8b-a889-556c60212310;1"
data "ExtraDescription" "h995ccd55gf9b2g4325gb9a8g6d80d7b8830e;2"

new entry "Shout_WildMagicBarbarian_ShadowyTendrils"
type "SpellData"
using "Shout_WildMagicBarbarian_ShadowyTendrils"
data "SpellRoll" "SpellAutoResolveOnSelf(Ability.Constitution, ConstitutionSaveDC(), false)"
data "TooltipStatusApply" "ApplyStatus(WILD_MAGIC_BARBARIAN_SHADOWY_TENDRILS,100,-1)"

new entry "Shout_WildMagicBarbarian_Teleport_Activate"
type "SpellData"
using "Shout_WildMagicBarbarian_Teleport_Activate"
data "SpellProperties" "ApplyStatus(SELF,WILD_MAGIC_BARBARIAN_TELEPORT_FIRST_TURN,100,1);ApplyStatus(SELF,WILD_MAGIC_BARBARIAN_TELEPORT,100,10);ApplyStatus(SELF,RAGE_MUTE,100,10)"
data "AreaRadius" "9"

new entry "WILD_MAGIC_BARBARIAN_TELEPORT"
type "StatusData"
using "WILD_MAGIC_BARBARIAN_TELEPORT"
data "DescriptionParams" "Distance(9)"
data "Boosts" "IF(not HasStatus('WILD_MAGIC_BARBARIAN_TELEPORT_FIRST_TURN')):UnlockSpell(Target_WildMagicBarbarian_Teleport)"
data "OnRemoveFunctors" "RemoveStatus('WILD_MAGIC_BARBARIAN_TELEPORT_FIRST_TURN')"

new entry "WILD_MAGIC_BARBARIAN_TELEPORT_FIRST_TURN"
type "StatusData"
using "WILD_MAGIC_BARBARIAN_TELEPORT"
data "Boosts" "UnlockSpellVariant(SpellId('Target_WildMagicBarbarian_Teleport'),ModifyUseCosts(Replace,BonusActionPoint,0,0,BonusActionPoint))"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "Target_WildMagicBarbarian_Teleport"
type "SpellData"
using "Target_WildMagicBarbarian_Teleport"
data "TargetRadius" "9"
data "DescriptionParams" "Distance(9)"

new entry "Shout_WildMagicBarbarian_ExplodingFlumph_Activate"
type "SpellData"
using "Shout_WildMagicBarbarian_ExplodingFlumph_Activate"
data "SpellProperties" "ApplyStatus(WILD_MAGIC_BARBARIAN__EXPLODING_FLUMPH_FIRST_TURN,100,1);ApplyStatus(WILD_MAGIC_BARBARIAN__EXPLODING_FLUMPH,100,10);ApplyStatus(SELF,RAGE_MUTE,100,10)"

new entry "WILD_MAGIC_BARBARIAN__EXPLODING_FLUMPH_FIRST_TURN"
type "StatusData"
using "WILD_MAGIC_BARBARIAN__EXPLODING_FLUMPH"
data "Boosts" "UnlockSpellVariant(SpellId('Target_WildMagicBarbarian_ExplodingFlumph'),ModifyUseCosts(Replace,BonusActionPoint,0,0,BonusActionPoint))"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "WILD_MAGIC_BARBARIAN__EXPLODING_FLUMPH"
type "StatusData"
using "WILD_MAGIC_BARBARIAN__EXPLODING_FLUMPH"
data "Boosts" "IF(not HasStatus('WILD_MAGIC_BARBARIAN__EXPLODING_FLUMPH_FIRST_TURN')):UnlockSpell(Target_WildMagicBarbarian_ExplodingFlumph)"
data "OnRemoveFunctors" "RemoveStatus('WILD_MAGIC_BARBARIAN__EXPLODING_FLUMPH_FIRST_TURN')"

new entry "Projectile_Flumph_Explosion"
type "SpellData"
using "Projectile_Flumph_Explosion"
data "SpellRoll" "not SavingThrow(Ability.Dexterity, CalculateSpellDC(Ability.Constitution, GetSummoner(context.Source)))"

new entry "Target_WildMagicBarbarian_ExplodingFlumph"
type "SpellData"
using "Target_WildMagicBarbarian_ExplodingFlumph"
data "SpellProperties" "GROUND:Summon(0e40a847-a275-4eea-95d7-dd6bad6643ca,1,,,,FLUMPH_EXPLODE)"

new entry "Shout_WildMagicBarbarian_WeaponInfusion"
type "SpellData"
using "Shout_WildMagicBarbarian_WeaponInfusion"
data "SpellProperties" "ApplyStatus(WILD_MAGIC_BARBARIAN_WEAPON_INFUSION_SELF,100,10);ApplyEquipmentStatus(MainHand, WILD_MAGIC_BARBARIAN_WEAPON_INFUSION,100,10);ApplyStatus(SELF,RAGE_MUTE,100,10)"
data "TooltipStatusApply" "ApplyStatus(WILD_MAGIC_BARBARIAN_WEAPON_INFUSION,100,10)"

new entry "WILD_MAGIC_BARBARIAN_WEAPON_INFUSION_SELF"
type "StatusData"
using "WILD_MAGIC_BARBARIAN_WEAPON_INFUSION"
data "Boosts" "AttackSpellOverride(Target_MainHandAttack_Force, Target_MainHandAttack)"
data "StatusEffectOverride" ""
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "WILD_MAGIC_BARBARIAN_WEAPON_INFUSION"
type "StatusData"
using "WILD_MAGIC_BARBARIAN_WEAPON_INFUSION"
data "Boosts" "ItemReturnToOwner();WeaponProperty(Thrown);WeaponProperty(Light);"

new entry "Target_MainHandAttack_Force"
type "SpellData"
using "Target_MainHandAttack"
data "SpellProperties" "GROUND:DealDamage(MainMeleeWeapon, Force);GROUND:ExecuteWeaponFunctors(MainHand);CastOffhand[GROUND:DealDamage(OffhandMeleeWeapon, Force);GROUND:ExecuteWeaponFunctors(OffHand)];IF(not Player(context.Source)):ApplyStatus(SELF,AI_HELPER_EXTRAATTACK,100,1);"
data "SpellSuccess" "DealDamage(max(1,MainMeleeWeapon), Force);ExecuteWeaponFunctors(MainHand);CastOffhand[DealDamage(max(0,OffhandMeleeWeapon), Force);ExecuteWeaponFunctors(OffHand)]"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon, Force)"
data "DamageType" "Force"

new entry "WILD_MAGIC_BARBARIAN_VINE_GROWTH"
type "StatusData"
using "WILD_MAGIC_BARBARIAN_VINE_GROWTH"
data "AuraStatuses" "TARGET:IF(Character() and not Self() and not Ally()):ApplyStatus(DIFFICULT_TERRAIN)"

new entry "Shout_WildMagicBarbarian_LightBolt_Activate"
type "SpellData"
using "Shout_WildMagicBarbarian_LightBolt_Activate"
data "SpellProperties" "ApplyStatus(SELF,WILD_MAGIC_BARBARIAN_LIGHT_BOLT_FIRST_TURN,100,1);ApplyStatus(WILD_MAGIC_BARBARIAN_LIGHT_BOLT,100,10);ApplyStatus(SELF,RAGE_MUTE,100,10)"
data "DisplayName" "hd26c24a0g76e8g4f02gb71agf0141da8be07;2"
data "Description" "h0ce40ac5g5a47g4ed8g9973g6eaf74072609;3"

new entry "WILD_MAGIC_BARBARIAN_LIGHT_BOLT_FIRST_TURN"
type "StatusData"
using "WILD_MAGIC_BARBARIAN_LIGHT_BOLT"
data "Boosts" "UnlockSpellVariant(SpellId('Projectile_WildMagicBarbarian_LightBolt'),ModifyUseCosts(Replace,BonusActionPoint,0,0,BonusActionPoint))"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "WILD_MAGIC_BARBARIAN_LIGHT_BOLT"
type "StatusData"
using "WILD_MAGIC_BARBARIAN_LIGHT_BOLT"
data "Boosts" "IF(not HasStatus('WILD_MAGIC_BARBARIAN_LIGHT_BOLT_FIRST_TURN')):UnlockSpell(Projectile_WildMagicBarbarian_LightBolt)"
data "OnRemoveFunctors" "RemoveStatus('WILD_MAGIC_BARBARIAN_LIGHT_BOLT_FIRST_TURN')"

new entry "Projectile_WildMagicBarbarian_LightBolt"
type "SpellData"
using "Projectile_WildMagicBarbarian_LightBolt"
data "SpellRoll" "not SavingThrow(Ability.Constitution, CalculateSpellDC(Ability.Constitution, GetSummoner(context.Source)))"

new entry "BolsteringMagicScaling"
type "PassiveData"
data "Boosts" "IF(ProficiencyBonusEqual(2)):ActionResource(BolsteringMagic,2,0);IF(ProficiencyBonusEqual(3)):ActionResource(BolsteringMagic,3,0);IF(ProficiencyBonusEqual(4)):ActionResource(BolsteringMagic,4,0);IF(ProficiencyBonusEqual(5)):ActionResource(BolsteringMagic,5,0);IF(ProficiencyBonusEqual(6)):ActionResource(BolsteringMagic,6,0)"
data "BoostContext" "OnCreate;OnShortRest;OnLongRest;OnStatusApply;OnStatusRemove;OnInventoryChanged;OnEquip"
data "Properties" "IsHidden"

new entry "Target_BolsteringMagic_Boost"
type "SpellData"
using "Target_BolsteringMagic_Boost"
data "Cooldown" ""
data "TargetConditions" "Character() and not Dead()"
data "DescriptionParams" "1d3"
data "UseCosts" "ActionPoint:1;BolsteringMagic:1"

new entry "BOLSTERING_MAGIC"
type "StatusData"
using "BOLSTERING_MAGIC"
data "DescriptionParams" "1d3"
data "Boosts" "RollBonus(Attack,1d3);RollBonus(RawAbility,1d3);RollBonus(SkillCheck,1d3)"

new entry "Shout_BolsteringMagic_SpellSlot"
type "SpellData"
using "Target_BolsteringMagic_SpellSlot1"
data "SpellType" "Shout"
data "TargetConditions" ""
data "SpellContainerID" ""
data "SpellProperties" "AI_IGNORE:TriggerRandomCast(1,0,BolsteringMagicSpellSlot)"
data "DisplayName" "581664b2-050a-4d68-a724-22f6a7e84045;1"
data "Description" "6db0925d-5cd2-4aa8-9029-976f75616a22;1"
data "ExtraDescription" "80b67f3c-f236-4810-bfe5-fa26fbd58a8e;1"
data "UseCosts" "ActionPoint:1;BolsteringMagic:1"
data "SpellFlags" "HasSomaticComponent"

new entry "BolsteringMagic_SpellSlot_Activate_Group1"
type "SpellData"
using "Target_BolsteringMagic_SpellSlot1"
data "SpellType" "Shout"
data "TargetConditions" ""
data "SpellProperties" "ApplyStatus(BOLSTERING_MAGIC_SPELL_SLOT_GROUP1,100,1)"
data "SpellContainerID" ""

new entry "BolsteringMagic_SpellSlot_Activate_Group2"
type "SpellData"
using "Target_BolsteringMagic_SpellSlot2"
data "SpellType" "Shout"
data "TargetConditions" ""
data "SpellProperties" "ApplyStatus(BOLSTERING_MAGIC_SPELL_SLOT_GROUP2,100,1)"
data "SpellContainerID" ""

new entry "BolsteringMagic_SpellSlot_Activate_Group3"
type "SpellData"
using "Target_BolsteringMagic_SpellSlot3"
data "SpellType" "Shout"
data "TargetConditions" ""
data "SpellProperties" "ApplyStatus(BOLSTERING_MAGIC_SPELL_SLOT_GROUP3,100,1)"
data "SpellContainerID" ""

new entry "BOLSTERING_MAGIC_SPELL_SLOT_GROUP1"
type "StatusData"
data "StatusType" "BOOST"
data "Boosts" "UnlockSpell(Target_BolsteringMagic_SpellSlot1)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "BOLSTERING_MAGIC_SPELL_SLOT_GROUP2"
type "StatusData"
using "BOLSTERING_MAGIC_SPELL_SLOT_GROUP1"
data "Boosts" "UnlockSpell(Target_BolsteringMagic_SpellSlot1);UnlockSpell(Target_BolsteringMagic_SpellSlot2)"

new entry "BOLSTERING_MAGIC_SPELL_SLOT_GROUP3"
type "StatusData"
using "BOLSTERING_MAGIC_SPELL_SLOT_GROUP1"
data "Boosts" "UnlockSpell(Target_BolsteringMagic_SpellSlot1);UnlockSpell(Target_BolsteringMagic_SpellSlot2);UnlockSpell(Target_BolsteringMagic_SpellSlot3)"

new entry "BOLSTERING_MAGIC_SPELL_SLOT_RECOVERED"
type "StatusData"
data "StatusType" "BOOST"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "Target_BolsteringMagic_SpellSlot1"
type "SpellData"
using "Target_BolsteringMagic_SpellSlot1"
data "Cooldown" ""
data "SpellProperties" "IF(not (HasPassive('UnlockedSpellSlotLevel1') and not HasActionResource('SpellSlot', 100, 1, true))):RestoreResource(WarlockSpellSlot,1,1);IF(HasPassive('UnlockedSpellSlotLevel1') and not HasActionResource('SpellSlot', 100, 1, true)):RestoreResource(SpellSlot,1,1);ApplyStatus(BOLSTERING_MAGIC_SPELL_SLOT_RECOVERED,100,-1);RemoveStatus(SELF,BOLSTERING_MAGIC_SPELL_SLOT_GROUP1);RemoveStatus(SELF,BOLSTERING_MAGIC_SPELL_SLOT_GROUP2);RemoveStatus(SELF,BOLSTERING_MAGIC_SPELL_SLOT_GROUP3)"
data "UseCosts" ""
data "SpellFlags" "HasSomaticComponent;IsMelee;Temporary"
data "TargetConditions" "Character() and not Dead() and not HasStatusError('BOLSTERING_MAGIC_SPELL_SLOT_RECOVERED','BolsteringMagicSpellSlot') and ((not HasActionResource('SpellSlot', 100, 1, true) and HasPassive('UnlockedSpellSlotLevel1')) or (not HasActionResource('WarlockSpellSlot', 100, 1, true) and HasPassive('UnlockedWarlockSpellSlotLevel1')))"

new entry "Target_BolsteringMagic_SpellSlot2"
type "SpellData"
using "Target_BolsteringMagic_SpellSlot2"
data "SpellProperties" "IF(not (HasPassive('UnlockedSpellSlotLevel2') and not HasActionResource('SpellSlot', 100, 2, true))):RestoreResource(WarlockSpellSlot,1,2);IF(HasPassive('UnlockedSpellSlotLevel2') and not HasActionResource('SpellSlot', 100, 2, true)):RestoreResource(SpellSlot,1,2);ApplyStatus(BOLSTERING_MAGIC_SPELL_SLOT_RECOVERED,100,-1);RemoveStatus(SELF,BOLSTERING_MAGIC_SPELL_SLOT_GROUP1);RemoveStatus(SELF,BOLSTERING_MAGIC_SPELL_SLOT_GROUP2);RemoveStatus(SELF,BOLSTERING_MAGIC_SPELL_SLOT_GROUP3)"
data "UseCosts" ""
data "TargetConditions" "Character() and not Dead() and not HasStatusError('BOLSTERING_MAGIC_SPELL_SLOT_RECOVERED','BolsteringMagicSpellSlot') and ((not HasActionResource('SpellSlot', 100, 2, true) and HasPassive('UnlockedSpellSlotLevel2')) or (not HasActionResource('WarlockSpellSlot', 100, 2, true) and HasPassive('UnlockedWarlockSpellSlotLevel2')))"

new entry "Target_BolsteringMagic_SpellSlot3"
type "SpellData"
data "SpellProperties" "IF(not (HasPassive('UnlockedSpellSlotLevel3') and not HasActionResource('SpellSlot', 100, 3, true))):RestoreResource(WarlockSpellSlot,1,3);IF(HasPassive('UnlockedSpellSlotLevel3') and not HasActionResource('SpellSlot', 100, 3, true)):RestoreResource(SpellSlot,1,3);ApplyStatus(BOLSTERING_MAGIC_SPELL_SLOT_RECOVERED,100,-1);RemoveStatus(SELF,BOLSTERING_MAGIC_SPELL_SLOT_GROUP1);RemoveStatus(SELF,BOLSTERING_MAGIC_SPELL_SLOT_GROUP2);RemoveStatus(SELF,BOLSTERING_MAGIC_SPELL_SLOT_GROUP3)"
data "UseCosts" ""
data "TargetConditions" "Character() and not Dead() and not HasStatusError('BOLSTERING_MAGIC_SPELL_SLOT_RECOVERED','BolsteringMagicSpellSlot') and ((not HasActionResource('SpellSlot', 100, 3, true) and HasPassive('UnlockedSpellSlotLevel3')) or (not HasActionResource('WarlockSpellSlot', 100, 3, true) and HasPassive('UnlockedWarlockSpellSlotLevel3')))"

new entry "Interrupt_Unstable_Backlash"
type "InterruptData"
using "Interrupt_Unstable_Backlash"
data "Properties" "RemoveStatus(OBSERVER_OBSERVER,WILD_MAGIC_BARBARIAN_TELEPORT);RemoveStatus(OBSERVER_OBSERVER,WILD_MAGIC_BARBARIAN_WEAPON_INFUSION);RemoveStatus(WILD_MAGIC_BARBARIAN_WEAPON_INFUSION_SELF);RemoveStatus(OBSERVER_OBSERVER,WILD_MAGIC_BARBARIAN_MAGIC_RETRIBUTION);RemoveStatus(OBSERVER_OBSERVER,WILD_MAGIC_BARBARIAN_PROTECTIVE_LIGHTS);RemoveStatus(OBSERVER_OBSERVER,WILD_MAGIC_BARBARIAN_VINE_GROWTH);RemoveStatus(OBSERVER_OBSERVER,WILD_MAGIC_BARBARIAN_LIGHT_BOLT);RemoveStatus(OBSERVER_OBSERVER,WILD_MAGIC_BARBARIAN__EXPLODING_FLUMPH);TriggerRandomCast(1,0,WildMagicBarbarian)"
